"use strict";var module=angular.module("gtDatePicker",[]);module.constant("gtDatePickerConfig",{template:"src/datePicker.html"}),module.directive("gtDatePicker",["gtDatePickerConfig",function(a){return{template:'<div ng-include="template"></div>',scope:{beginModel:"=begin",endModel:"=end",onChange:"&"},link:function(b){var c=function(a){return("0"+a).slice(-2)},d=function(a){a=new Date(a),a.setHours(0,0,0,0),this.date=a};d.prototype.isAfter=function(a){return a.date.getTime()<=this.date.getTime()?!0:void 0},d.prototype.isActive=function(){return this.isAfter(b.begin)&&b.end.isAfter(this)},d.prototype.equal=function(a){return this.date.getTime()==a.date.getTime()},d.prototype.getMonth=function(){return this.date.getFullYear()+"-"+c(this.date.getMonth()+1)},d.prototype.toString=function(){return this.date.getFullYear()+"-"+c(this.date.getMonth()+1)+"-"+c(this.date.getDate())},d.prototype.yesterday=function(){var a=new Date(this.date);return a.setDate(a.getDate()-1),new d(a)},d.prototype.lastMonth=function(){var a=new Date(this.date);return a.setMonth(a.getMonth()-1),a.setDate(1),new d(a)},d.prototype.offsetDate=function(a){return this.date.setDate(this.date.getDate()+a),this},d.prototype.nextMonth=function(){var a=new Date(this.date);return a.setMonth(a.getMonth()+1),a.setDate(1),new d(a)},d.prototype.daysOfMonth=function(){return new Date(this.date.getFullYear(),this.date.getMonth()+1,0).getDate()},d.prototype.firstDay=function(){var a=new Date(this.date);return a.setDate(1),a.getDay()},d.prototype.lastDay=function(){var a=this.daysOfMonth(),b=new Date(this.date);return b.setDate(a),b.getDay()},d.prototype.getLastDay=function(){var a=new Date(this.date);return a.setDate(this.daysOfMonth()),new d(a)},d.prototype.isToday=function(){var a=new d(new Date);return this.equal(a)};var e=function(a){for(var b,c=[],e=0;e<a.firstDay();e++)b=a.lastMonth().getLastDay().offsetDate(e-a.firstDay()+1),b.overflow=!0,c.push(b);for(var f=0;f<a.daysOfMonth();f++)b=new d(a.date),b.date.setDate(f+1),c.push(b);for(var g=0;g<6-a.lastDay();g++)b=a.nextMonth().offsetDate(g),b.overflow=!0,c.push(b);return c},f=b.setView=function(a){a=a||b.end.lastMonth(),b.leftMonth=a,b.rightMonth=a.nextMonth(),b.month=e(a),b.nextMonth=e(a.nextMonth())};b.template=a.template;var g=function(){b.end=new d(b.endModel);var a=new d(b.beginModel);b.end.isAfter(a)||(a=b.end.yesterday()),b.begin=a,f()};g(),b.monthTitle=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"],b.prev=function(){f(b.leftMonth.lastMonth())},b.next=function(){f(b.leftMonth.nextMonth())};var h,i=0;b.show=!1,b.click=function(a){0==i?(i=1,b.begin=a,h=a,b.end=b.begin):1==i&&(i=0)},b.hover=function(a){1==i&&(h.isAfter(a)?(b.end=h,b.begin=a):(b.begin=h,b.end=a))},b.showPicker=function(){b.show=!b.show},b.confirm=function(){b.beginModel=b.begin.toString(),b.endModel=b.end.toString(),b.show=!1,"function"==typeof b.onChange&&b.onChange({begin:b.beginModel,end:b.endModel})};var j=function(){return b.begin.toString()+"_"+b.end.toString()};b.text={},b.$watch(j,function(){b.text.begin=b.begin.toString(),b.text.end=b.end.toString()});var k=function(){return b.beginModel+"_"+b.endModel};b.$watch(k,function(){g()}),b.changeBegin=function(a){var c=new d(a);return"Invalid Date"==c.date?void(b.text.begin=b.begin.toString()):(c.isAfter(b.end)&&(b.end=c),b.begin=c,void f(c))},b.changeEnd=function(a){var c=new d(a);return"Invalid Date"==c.date?void(b.text.end=b.end.toString()):(b.begin.isAfter(c)&&(b.begin=c),b.end=c,void f(c.lastMonth()))},b.cancel=function(){g(),b.show=!1}}}}]),angular.module("gtDatePicker").run(["$templateCache",function(a){a.put("src/datePicker.html",'<div class="date-picker">\n  <div class="date-picker-value" ng-click="showPicker()">\n    {{ beginModel }} - {{ endModel }}\n  </div>\n  <div class="date-picker-content" ng-show="show">\n    <div class="date-picker-top">\n      <div class="month-helper" ng-click="prev()">\n        &larr;\n      </div>\n      <div class="month-wrap">\n        <div class="month-title">\n          {{ leftMonth.getMonth() }}\n        </div>\n        <div class="day-title">\n      <span class="day-title-item" ng-repeat="day in monthTitle">\n        {{ day }}\n      </span>\n        </div>\n    <span class="date-number" ng-click="click(day)" ng-mouseover="hover(day)" ng-class="{active: day.isActive(), disabled: day.overflow, today: day.isToday()}" ng-repeat="day in month">\n      {{ day.date.getDate() }}\n    </span>\n      </div>\n      <div class="month-wrap">\n        <div class="month-title">\n          {{ rightMonth.getMonth() }}\n        </div>\n        <div class="day-title">\n      <span class="day-title-item" ng-repeat="day in monthTitle">\n        {{ day }}\n      </span>\n        </div>\n    <span class="date-number" ng-click="click(day)" ng-mouseover="hover(day)" ng-class="{active: day.isActive(), disabled: day.overflow, today: day.isToday()}" ng-repeat="day in nextMonth">\n      {{ day.date.getDate() }}\n    </span>\n      </div>\n      <div class="month-helper" ng-click="next()">\n        &rarr;\n      </div>\n    </div>\n\n    <div class="date-picker-bottom">\n      <input type="text" ng-model="text.begin" ng-click="setView(begin)" ng-blur="changeBegin(text.begin)"> -\n      <input type="text" ng-model="text.end" ng-click="setView(end.lastMonth())" ng-blur="changeEnd(text.end)">\n      <div class="bottom-button confirm" ng-click="confirm()">Confirm</div>\n      <div class="bottom-button cancel" ng-click="cancel()">Cancel</div>\n      <div style="clear: both"></div>\n    </div>\n  </div>\n</div>')}]);
//# sourceMappingURL=datepicker.min.js.map