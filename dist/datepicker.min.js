"use strict";var module=angular.module("gtDatePicker",[]);module.constant("gtDatePickerConfig",{template:"src/datePicker.html"}),module.directive("gtDatePicker",["gtDatePickerConfig",function(a){return{template:'<div ng-include="template"></div>',scope:{beginModel:"=begin",endModel:"=end",onChange:"&"},link:function(b){var c=window.navigator.language.toLowerCase(),d=function(){var a=[],b=new Date;try{for(var d=0;7>d;d++)b.setDate(b.getDate()-b.getDay()+d),a.push(b.toLocaleString(c,{weekday:"narrow"}))}catch(e){return["Sun","Mon","Tue","Wed","Thur","Fri","Sat"]}return a};b.monthTitle=d();var e={en:["Confirm","Cancel"],"zh-cn":["确定","取消"]};b.button=e[c]||e.en;var f=function(a){return("0"+a).slice(-2)},g=function(a){a=new Date(a),a.setHours(0,0,0,0),this.date=a};g.prototype.isAfter=function(a){return a.date.getTime()<=this.date.getTime()?!0:void 0},g.prototype.isActive=function(){return this.isAfter(b.begin)&&b.end.isAfter(this)},g.prototype.equal=function(a){return this.date.getTime()==a.date.getTime()},g.prototype.getMonth=function(){try{return this.date.toLocaleString(c,{year:"numeric",month:"short"})}catch(a){return this.date.getFullYear()+"-"+f(this.date.getMonth()+1)}},g.prototype.toString=function(){return this.date.getFullYear()+"-"+f(this.date.getMonth()+1)+"-"+f(this.date.getDate())},g.prototype.yesterday=function(){var a=new Date(this.date);return a.setDate(a.getDate()-1),new g(a)},g.prototype.lastMonth=function(){var a=new Date(this.date);return a.setMonth(a.getMonth()-1),a.setDate(1),new g(a)},g.prototype.offsetDate=function(a){return this.date.setDate(this.date.getDate()+a),this},g.prototype.nextMonth=function(){var a=new Date(this.date);return a.setMonth(a.getMonth()+1),a.setDate(1),new g(a)},g.prototype.daysOfMonth=function(){return new Date(this.date.getFullYear(),this.date.getMonth()+1,0).getDate()},g.prototype.firstDay=function(){var a=new Date(this.date);return a.setDate(1),a.getDay()},g.prototype.lastDay=function(){var a=this.daysOfMonth(),b=new Date(this.date);return b.setDate(a),b.getDay()},g.prototype.getLastDay=function(){var a=new Date(this.date);return a.setDate(this.daysOfMonth()),new g(a)},g.prototype.isToday=function(){var a=new g(new Date);return this.equal(a)};var h=function(a){for(var b,c=[],d=0;d<a.firstDay();d++)b=a.lastMonth().getLastDay().offsetDate(d-a.firstDay()+1),b.overflow=!0,c.push(b);for(var e=0;e<a.daysOfMonth();e++)b=new g(a.date),b.date.setDate(e+1),c.push(b);for(var f=0;f<6-a.lastDay();f++)b=a.nextMonth().offsetDate(f),b.overflow=!0,c.push(b);return c},i=b.setView=function(a){a=a||b.end.lastMonth(),b.leftMonth=a,b.rightMonth=a.nextMonth(),b.month=h(a),b.nextMonth=h(a.nextMonth())};b.template=a.template;var j=function(){b.end=new g(b.endModel);var a=new g(b.beginModel);b.end.isAfter(a)||(a=b.end.yesterday()),b.begin=a,i()};j(),b.prev=function(){i(b.leftMonth.lastMonth())},b.next=function(){i(b.leftMonth.nextMonth())};var k,l=0;b.show=!1,b.click=function(a){0==l?(l=1,b.begin=a,k=a,b.end=b.begin):1==l&&(l=0)},b.hover=function(a){1==l&&(k.isAfter(a)?(b.end=k,b.begin=a):(b.begin=k,b.end=a))},b.showPicker=function(){b.show=!b.show},b.confirm=function(){b.beginModel=b.begin.toString(),b.endModel=b.end.toString(),b.show=!1,"function"==typeof b.onChange&&b.onChange({begin:b.beginModel,end:b.endModel})},b.cancel=function(){j(),b.show=!1};var m=function(){return b.begin.toString()+"_"+b.end.toString()};b.text={},b.$watch(m,function(){b.text.begin=b.begin.toString(),b.text.end=b.end.toString()});var n=function(){return b.beginModel+"_"+b.endModel};b.$watch(n,function(){j()}),b.changeBegin=function(a){var c=new g(a);return"Invalid Date"==c.date?void(b.text.begin=b.begin.toString()):(c.isAfter(b.end)&&(b.end=c),b.begin=c,void i(c))},b.changeEnd=function(a){var c=new g(a);return"Invalid Date"==c.date?void(b.text.end=b.end.toString()):(b.begin.isAfter(c)&&(b.begin=c),b.end=c,void i(c.lastMonth()))}}}}]),angular.module("gtDatePicker").run(["$templateCache",function(a){a.put("src/datePicker.html",'<div class="date-picker">\n  <div class="date-picker-value" ng-click="showPicker()">\n    {{ beginModel }} - {{ endModel }}\n  </div>\n  <div class="date-picker-content" ng-show="show">\n    <div class="date-picker-top">\n      <div class="month-helper" ng-click="prev()">\n        &larr;\n      </div>\n      <div class="month-wrap">\n        <div class="month-title">\n          {{ leftMonth.getMonth() }}\n        </div>\n        <div class="day-title">\n      <span class="day-title-item" ng-repeat="day in monthTitle">\n        {{ day }}\n      </span>\n        </div>\n    <span class="date-number" ng-click="click(day)" ng-mouseover="hover(day)" ng-class="{active: day.isActive(), disabled: day.overflow, today: day.isToday()}" ng-repeat="day in month">\n      {{ day.date.getDate() }}\n    </span>\n      </div>\n      <div class="month-wrap">\n        <div class="month-title">\n          {{ rightMonth.getMonth() }}\n        </div>\n        <div class="day-title">\n      <span class="day-title-item" ng-repeat="day in monthTitle">\n        {{ day }}\n      </span>\n        </div>\n    <span class="date-number" ng-click="click(day)" ng-mouseover="hover(day)" ng-class="{active: day.isActive(), disabled: day.overflow, today: day.isToday()}" ng-repeat="day in nextMonth">\n      {{ day.date.getDate() }}\n    </span>\n      </div>\n      <div class="month-helper" ng-click="next()">\n        &rarr;\n      </div>\n    </div>\n\n    <div class="date-picker-bottom">\n      <input type="text" ng-model="text.begin" ng-click="setView(begin)" ng-blur="changeBegin(text.begin)"> -\n      <input type="text" ng-model="text.end" ng-click="setView(end.lastMonth())" ng-blur="changeEnd(text.end)">\n      <div class="bottom-button confirm" ng-click="confirm()">{{ button[0] }}</div>\n      <div class="bottom-button cancel" ng-click="cancel()">{{ button[1] }}</div>\n      <div style="clear: both"></div>\n    </div>\n  </div>\n</div>')}]);
//# sourceMappingURL=datepicker.min.js.map